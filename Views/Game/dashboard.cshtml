@using System.Collections;
@using Live_Quiz.Models;
@model ArrayList
@{
    ViewBag.Title = "dashboard";
}
<style>
    a:hover{
        color:red;
    }
</style>
 <div class="card w-75 m-auto shadow">
            <div class="card-header">
                <center>
                    <h2>
                        PIN
                    </h2>
                </center>
            </div>
            <div class="card-body">
                <div class="card-body">
                <center>
                    <h1>Pin is: <b> @Request.QueryString["pin"]</b></h1>
                </center>
                </div>
            </div>
     </div><br />

<div id="home">
    @if (Model == null || Model.Count == 0)
    {

        <div class="card w-75 m-auto shadow">
            <div class="card-header alert alert-danger">
                <center>
                    <h2>
                        Waiting
                    </h2>
                </center>
            </div>
            <div class="card-body">
                <center>
                    <h2>
                        Waiting for players to join.
                    </h2>
                </center>
            </div>
        </div>
    }
    else
    {
         <div class="card w-75 m-auto shadow">
            <div class="card-header alert alert-success">
                <center>
                    <h2>
                        Joined
                    </h2>
                </center>
            </div>
            <div class="card-body">
                <center>
                    <h3 id="cou">Number of Players: @Model.Count</h3>
                </center>
            </div>
         </div><br />
        <div class="card w-75 m-auto shadow">
            <div class="card-header alert alert-info">
                <center>
                    <h2>
                        Players Name
                    </h2>
                </center>
            </div>
            <div class="card-body">
                <div id="main">
                    <center>
                        <table class="table table-borderless table-hover"  id="utable" style="font-size:24px;">
                            @foreach (var item in Model)
                            {
                                <tr align="center">
                                    <td>
                                    <a onclick="udelete('@item')">@item</a>
                                    </td>
                                </tr>
                            }
                        </table>
                    </center>
                    @using (Html.BeginForm("on", "game", FormMethod.Post))
                    {
                        <div style="height:200px; margin:auto">
                            <center>
                                <input type="hidden" name="pin" value="@Request.QueryString["pin"]">
                                <input type="submit" class="btn btn-secondary" value="Start" name="btn" />
                            </center>
                        </div>
                    }
                </div>
            </div>
        </div>
        
    }
</div>
    @section Scripts
{
        <script>
            function udelete(s) {
                console.log("in");
                $.ajax({
                    url: "DeleteUser?pin="+@Request.QueryString["pin"],
                    type: "POST",
                    data: {"name":s}
                })
            }
            var elem = document.documentElement;
            function openFullscreen() {
                if (elem.requestFullscreen) {
                    elem.requestFullscreen();
                } else if (elem.mozRequestFullScreen) { /* Firefox */
                    elem.mozRequestFullScreen();
                } else if (elem.webkitRequestFullscreen) { /* Chrome, Safari & Opera */
                    elem.webkitRequestFullscreen();
                } else if (elem.msRequestFullscreen) { /* IE/Edge */
                    elem.msRequestFullscreen();
                }
            }
        $(document).ready(function () {
           check();
            var l = 0, tem;
            function check() {
                $.ajax({
                    url: "dashboard?pin="+@Request.QueryString["pin"],
                    type: "GET"
                })
                $("#utable").load(location.href + " #utable>*", "");
                $("#cou").load(location.href + " #cou", "");
                $("#home").load(location.href + " #home>*", "");
                setTimeout(check,1500);
            }
        })
        </script>
    }
